suite: example ingress tests
release:
  name: release-name
tests:
  - it: should render release-name-example ingress object
    template: ingress.yaml
    set:
      ingress:
        enabled: true
    documentSelector:
      path: $[?(@.kind == "Ingress")].metadata.name
      value: release-name-example
    asserts:
      - isKind:
          of: Ingress
      - equal:
          path: spec.rules[0].http.paths[0].path
          value: /
      - equal:
          path: spec.rules[0].http.paths[0].pathType
          value: ImplementationSpecific
      - equal:
          path: spec.rules[0].http.paths[0].backend.service.name
          value: release-name-example
      - equal:
          path: spec.rules[0].http.paths[0].backend.service.port.number
          value: 80
